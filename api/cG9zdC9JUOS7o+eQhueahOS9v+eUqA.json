{"title":"网络爬虫学习1","date":"2018-12-20T14:52:01.512Z","slug":"IP代理的使用","comments":true,"updated":"2018-12-23T06:53:55.685Z","content":"<h2 id=\"IP代理的使用\"><a href=\"#IP代理的使用\" class=\"headerlink\" title=\"IP代理的使用\"></a>IP代理的使用</h2><h3 id=\"1-为何使用IP代理\"><a href=\"#1-为何使用IP代理\" class=\"headerlink\" title=\"1.为何使用IP代理\"></a>1.为何使用IP代理</h3><p>User Agent已经设置好了，但是还应该考虑一个问题，程序的运行速度是很快的，如果我们利用一个爬虫程序在网站爬取东西，一个固定IP的访问频率就会很高，这不符合人为操作的标准，因为人操作不可能在几ms内，进行如此频繁的访问。所以一些网站会设置一个IP访问频率的阈值，如果一个IP访问频率超过这个阈值，说明这个不是人在访问，而是一个爬虫程序。</p>\n<h3 id=\"2-一般步骤说明\"><a href=\"#2-一般步骤说明\" class=\"headerlink\" title=\"2.一般步骤说明\"></a>2.一般步骤说明</h3><p>一个很简单的解决办法就是设置延时，但是这显然不符合爬虫快速爬取信息的目的，所以另一种更好的方法就是使用IP代理。使用代理的步骤：<br>(1)调用urlib.request.ProxyHandler()，proxies参数为一个字典。<br>(2)创建Opener(类似于urlopen，这个代开方式是我们自己定制的)<br>(3)安装Opener<br>引用块内容<br>使用install_opener方法之后，会将程序默认的urlopen方法替换掉。也就是说，如果使用install_opener之后，在该文件中，再次调用urlopen会使用自己创建好的opener。如果不想替换掉，只是想临时使用一下，可以使用opener.open(url)，这样就不会对程序默认的urlopen有影响。</p>\n<h2 id=\"常见的User-Agent\"><a href=\"#常见的User-Agent\" class=\"headerlink\" title=\"常见的User Agent\"></a>常见的User Agent</h2><h3 id=\"1-Android\"><a href=\"#1-Android\" class=\"headerlink\" title=\"1.Android\"></a>1.Android</h3><p>Mozilla/5.0 (Linux; Android 4.1.1; Nexus 7 Build/JRO03D) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Safari/535.19<br>Mozilla/5.0 (Linux; U; Android 4.0.4; en-gb; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30<br>Mozilla/5.0 (Linux; U; Android 2.2; en-gb; GT-P1000 Build/FROYO) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1</p>\n<h3 id=\"2-Firefox\"><a href=\"#2-Firefox\" class=\"headerlink\" title=\"2.Firefox\"></a>2.Firefox</h3><p>Mozilla/5.0 (Windows NT 6.2; WOW64; rv:21.0) Gecko/20100101 Firefox/21.0<br>Mozilla/5.0 (Android; Mobile; rv:14.0) Gecko/14.0 Firefox/14.0</p>\n<h3 id=\"3-Google-Chrome\"><a href=\"#3-Google-Chrome\" class=\"headerlink\" title=\"3.Google Chrome\"></a>3.Google Chrome</h3><p>Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.94 Safari/537.36<br>Mozilla/5.0 (Linux; Android 4.0.4; Galaxy Nexus Build/IMM76B) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.133 Mobile Safari/535.19</p>\n<h3 id=\"4-iOS\"><a href=\"#4-iOS\" class=\"headerlink\" title=\"4.iOS\"></a>4.iOS</h3><p>Mozilla/5.0 (iPad; CPU OS 5_0 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9A334 Safari/7534.48.3<br>Mozilla/5.0 (iPod; U; CPU like Mac OS X; en) AppleWebKit/420.1 (KHTML, like Gecko) Version/3.0 Mobile/3A101a Safari/419.3</p>\n<h2 id=\"国内代理网站\"><a href=\"#国内代理网站\" class=\"headerlink\" title=\"国内代理网站\"></a>国内代理网站</h2><p><a href=\"https://www.xicidaili.com/\" target=\"_blank\" rel=\"noopener\">西刺</a></p>\n","prev":{"title":"网络爬虫学习-beautifulsoup的使用","slug":"爬虫学习6"},"next":{"title":"无题","slug":"2"},"link":"http://www.blog.oyxwxn.com/post/IP代理的使用/","toc":[{"title":"IP代理的使用","id":"IP代理的使用","index":"1","children":[{"title":"1.为何使用IP代理","id":"1-为何使用IP代理","index":"1.1"},{"title":"2.一般步骤说明","id":"2-一般步骤说明","index":"1.2"}]},{"title":"常见的User Agent","id":"常见的User-Agent","index":"2","children":[{"title":"1.Android","id":"1-Android","index":"2.1"},{"title":"2.Firefox","id":"2-Firefox","index":"2.2"},{"title":"3.Google Chrome","id":"3-Google-Chrome","index":"2.3"},{"title":"4.iOS","id":"4-iOS","index":"2.4"}]},{"title":"国内代理网站","id":"国内代理网站","index":"3"}],"copyright":{"author":"ufo","published":"December 20, 2018","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"},"reward":true}